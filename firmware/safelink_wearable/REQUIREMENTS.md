# SafeLink Wearable 디바이스 요구사항서

## 1. 개요
SafeLink Wearable은 작업자의 안전을 실시간 모니터링하는 웨어러블 밴드형 디바이스입니다.

## 2. 하드웨어 요구사항

### 2.1 메인 컨트롤러
- **MCU**: ESP32-C6
  - WiFi 6 지원
  - Bluetooth 5 (LE) 지원
  - 저전력 모드 지원

### 2.2 센서 모듈
- **심박 센서**: PPG(PhotoPlethysmoGraphy) 센서
  - 측정 범위: 60-200 BPM
  - 측정 정확도: ±2 BPM
  - 샘플링 주파수: 1Hz

- **피부 온도 센서**: 적외선 온도 센서
  - 측정 범위: 32-42°C
  - 측정 정확도: ±0.1°C
  - 샘플링 주파수: 1Hz

- **환경 온습도 센서**: DHT22 또는 SHT30
  - 온도 범위: -40~80°C (±0.5°C)
  - 습도 범위: 0-100% RH (±2%)
  - 샘플링 주파수: 1Hz

### 2.3 전원 관리
- **배터리**: 300mAh Li-Po 배터리
- **충전**: USB-C 충전 포트
- **배터리 수명**: 최소 7일 (딥슬립 모드 활용)
- **저전력 설계**: 인터럽트 기반 동작

### 2.4 통신 모듈
- **BLE 5.0**: 웨어러블 허브와의 근거리 통신
- **WiFi**: 직접 클라우드 연결 (선택적)
- **통신 범위**: BLE 10m, WiFi 50m

## 3. 소프트웨어 요구사항

### 3.1 실시간 데이터 수집
- 심박수, 피부온도, 환경온습도 1Hz 간격 측정
- WBGT 지수 실시간 계산
- 데이터 로컬 버퍼링 (최대 1시간 분량)

### 3.2 안전 임계치 모니터링
#### 3.2.1 체온 기준
- **경고 단계**: 37.5-38°C
  - 1분마다 알림
  - 위험 신호 전송
- **위험 단계**: 38°C 이상
  - 계속 알림
  - 치명적 신호 전송

#### 3.2.2 심박수 기준
- **경고 단계**: 100-120 BPM
  - 처음 구간 진입시 알림
  - 경고 신호 전송
- **위험 단계**: 120-130 BPM
  - 처음 구간 진입시 알림
  - 위험 신호 전송

#### 3.2.3 WBGT 기준
- **주의 단계**: 28-30°C
  - 1시간마다 알림
  - 경고 신호 전송
- **위험 단계**: 30°C 이상
  - 30분마다 알림
  - 위험 신호 전송

### 3.3 통신 프로토콜
- **BLE GATT 서비스**: 센서 데이터 전송
- **WiFi HTTP/MQTT**: 클라우드 직접 연결
- **데이터 포맷**: JSON 기반
- **전송 주기**: 정상시 10초, 위험시 1초

### 3.4 전원 관리
- **딥슬립 모드**: 센서 측정 간격 사이
- **웨이크업 조건**: 
  - 타이머 인터럽트 (1초)
  - 임계치 초과 감지
  - BLE 연결 요청
- **배터리 모니터링**: 잔량 5% 미만시 경고

## 4. 기능 요구사항

### 4.1 핵심 기능
- 실시간 생체신호 측정 및 전송
- WBGT 지수 계산 및 모니터링
- 위험 상황 자동 감지 및 알림
- 저전력 모드 자동 전환

### 4.2 알림 기능
- LED 상태 표시
- 진동 모터 경고
- BLE를 통한 스마트폰 알림 전송

### 4.3 데이터 관리
- 로컬 데이터 버퍼링
- 네트워크 단절시 오프라인 동작
- 연결 복구시 데이터 동기화

## 5. 성능 요구사항

### 5.1 응답성
- 센서 데이터 수집: 1Hz
- 위험 감지 응답: 1초 이내
- BLE 데이터 전송: 10초 이내

### 5.2 안정성
- 연속 동작 시간: 최소 168시간 (7일)
- 데이터 손실률: 1% 미만
- 네트워크 재연결: 30초 이내

### 5.3 확장성
- I2C/UART 확장 포트 지원
- OTA 업데이트 지원
- 추가 센서 모듈 연결 가능

## 6. 환경 요구사항

### 6.1 작동 환경
- 온도: -10°C ~ 60°C
- 습도: 10% ~ 90% RH
- 방진/방수: IP65 등급

### 6.2 내구성
- 낙하 충격: 1.5m 높이
- 진동 저항: IEC 68-2-6 준수
- 사용 수명: 최소 2년

## 7. 개발 우선순위

### Phase 1 (MVP)
1. 기본 센서 데이터 수집
2. BLE 통신 구현
3. 기본 임계치 감지

### Phase 2
1. WBGT 계산 알고리즘
2. 저전력 모드 최적화
3. 데이터 버퍼링

### Phase 3
1. WiFi 직접 연결
2. OTA 업데이트
3. 확장 센서 지원 